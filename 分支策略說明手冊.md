# åˆ†æ”¯ç­–ç•¥èªªæ˜æ‰‹å†Š v1ï¼ˆå°å‹åœ˜éšŠé©ç”¨ï¼‰

## ğŸ“– ä½¿ç”¨æŒ‡å—

æœ¬æ‰‹å†Šåˆ†ç‚ºå…©å€‹éƒ¨åˆ†ï¼š
- **[ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸€èˆ¬é–‹ç™¼äººå“¡æŒ‡å—](#ç¬¬ä¸€éƒ¨åˆ†ä¸€èˆ¬é–‹ç™¼äººå“¡æŒ‡å—)** - æ—¥å¸¸é–‹ç™¼æµç¨‹èˆ‡æ“ä½œæŒ‡å¼•
- **[ç¬¬äºŒéƒ¨åˆ†ï¼šå¯©æ ¸äººå“¡æŒ‡å—](#ç¬¬äºŒéƒ¨åˆ†å¯©æ ¸äººå“¡æŒ‡å—)** - PR å¯©æ ¸æ¨™æº–ã€åˆ†æ”¯ä¿è­·è¨­å®šèˆ‡æµç¨‹ç®¡ç†

---

# ç¬¬ä¸€éƒ¨åˆ†ï¼šä¸€èˆ¬é–‹ç™¼äººå“¡æŒ‡å—

## 0. å¿«é€Ÿé–‹å§‹

### æ ¸å¿ƒåŸå‰‡ï¼ˆå¿…è®€ï¼‰

- **main æ°¸é ç­‰åŒæ–¼å·²ä¸Šç·šç‹€æ…‹**ï¼Œæœªç¢ºå®šè¦ä¸Šç·šçš„åŠŸèƒ½ä¸å¯é€² main
- **æ‰€æœ‰åŠŸèƒ½åˆ†æ”¯ä¸€å¾‹å¾ main åˆ‡å‡º**
- **åŠŸèƒ½åˆ†æ”¯ä¸ç›´æ¥åˆä½µå› mainï¼Œè€Œæ˜¯åˆä½µåˆ° release/***
- **release/* æ˜¯å”¯ä¸€å…è¨±å¤šåŠŸèƒ½æ•´åˆçš„åˆ†æ”¯**

### åˆ†æ”¯æµç¨‹åœ–

```
main â†’ feature/* â†’ release/* â†’ main
                â†“
              sit â†’ uat â†’ prod
```

### æœªä¸Šç·šç³»çµ±ï¼ˆPre-Go-Liveï¼‰æ€éº¼å¥—ç”¨æœ¬ç­–ç•¥

æœ‰äº›å°ˆæ¡ˆåœ¨ã€Œå°šæœªå°å¤–ä¸Šç·šã€å‰ï¼Œå¯èƒ½åªæœ‰ `sit` ç’°å¢ƒ/åˆ†æ”¯ï¼Œç”šè‡³é‚„æ²’æœ‰ `uat`ã€`prod`ã€‚æ­¤æ™‚å»ºè­°ç”¨ä»¥ä¸‹æ–¹å¼è½åœ°ï¼Œä¿æŒç­–ç•¥ä¸€è‡´ã€é¿å…æ—¥å¾Œåˆ‡æ›æˆæœ¬ï¼š

- **æ ¸å¿ƒå®šç¾©å…ˆå°é½Šï¼š**
  - `main` = **ç©©å®šåŸºæº–**ï¼ˆå¯è¦–ç‚ºæœªä¾† prod baselineï¼‰ï¼Œä½†åœ¨ã€ŒçœŸçš„ prod éƒ¨ç½²å®Œæˆã€å‰ï¼Œ`main` ä¸ä¸€å®šç­‰åŒå·²ä¸Šç·š
  - `release/*` = **æ•´åˆèˆ‡éƒ¨ç½²ä¾†æº**ï¼ˆè®“ç’°å¢ƒé©—è­‰éƒ½ä»¥ release ç‚ºæº–ï¼‰
  - `sit` = **éƒ¨ç½²/é©—è­‰åˆ†æ”¯**ï¼ˆç¦æ­¢åœ¨ `sit` ä¸Šç›´æ¥é–‹ç™¼ä¿®æ­£ï¼‰
- **æœ€å°å¯é‹ä½œæµç¨‹ï¼ˆåªæœ‰ `sit` æ™‚ï¼‰ï¼š**
  - `feature/*` ä»ä¸€å¾‹å¾ `main` åˆ‡å‡º
  - `feature/*` å®Œæˆå¾Œ **æ PR åˆä½µåˆ° `release/x.y.z`**
  - ç’°å¢ƒæ¨é€²å…ˆåšåˆ°ï¼š`release/x.y.z â†’ sit`
- **ç¬¬ä¸€æ¬¡ã€ŒçœŸçš„ prod éƒ¨ç½²ã€å‰ï¼š**
  - ä¸åš `release â†’ main`ï¼ˆé¿å…æŠŠã€Œå°šæœªå®Œæˆ go-live é©—è­‰ã€çš„ç‰ˆæœ¬è¦–ç‚º main åŸºæº–ï¼‰
  - è‹¥å¾ŒçºŒè¦å°å…¥ `uat`ã€`prod`ï¼Œå»ºè­°åœ¨ç¬¬ä¸€æ¬¡ go-live å‰å…ˆå»ºç«‹åˆ†æ”¯ä¸¦å¥—ç”¨ä¿è­·è¦å‰‡ï¼ˆè®“æ¨é€²è·¯å¾‘å›ºå®šç‚º `release/* â†’ sit â†’ uat â†’ prod`ï¼‰
- **ç¬¬ä¸€æ¬¡ã€ŒçœŸçš„ prod éƒ¨ç½²å®Œæˆã€å¾Œï¼š**
  - ä¾æœ¬æ‰‹å†Šè¦ç¯„ **å»ºç«‹ PRï¼š`release/x.y.z` â†’ `main`**ï¼Œè®“ `main` å¾æ­¤æ­£å¼å°é½Šã€Œå·²ä¸Šç·š/å·²éƒ¨ç½²ç‰ˆæœ¬ã€

---

## 1. åˆ†æ”¯ç¨®é¡èˆ‡æ„ç¾©

### main
- ä»£è¡¨ã€Œç›®å‰ç·šä¸Šç‰ˆæœ¬ã€æˆ–ã€Œå¯è¦–ç‚º prod baselineã€
- åªæ¥å—å·²é©—è­‰ä¸¦æº–å‚™ä¸Šç·šï¼ˆæˆ–å·²ä¸Šç·šï¼‰çš„è®Šæ›´
- **ç¦æ­¢**ï¼šæœªç¢ºå®šä¸Šç·šçš„åŠŸèƒ½

### release/x.y.z
- æœ¬æ¬¡ç‰ˆæœ¬çš„æ•´åˆåˆ†æ”¯ï¼ˆæ•´åˆå¤šå€‹ featureï¼‰
- æ±ºå®šã€Œé€™ä¸€ç‰ˆè¦ä¸Šç·šå“ªäº›åŠŸèƒ½ã€
- SIT / UAT æ¸¬è©¦ä»¥ release ç‚ºæº–

### feature/*
- å–®ä¸€åŠŸèƒ½/è­°é¡Œé–‹ç™¼åˆ†æ”¯
- åƒ…ä½œç‚ºé–‹ç™¼ç”¨é€”ï¼Œå®Œæˆå¾Œé€é PR åˆä½µåˆ° release

### sit / uat / prod
- å°æ‡‰éƒ¨ç½²ç’°å¢ƒåˆ†æ”¯ï¼ˆDeployment branchesï¼‰
- ä¾†æºä¸€å¾‹ä¾†è‡ª release/*ï¼ˆæˆ– hotfixï¼‰
- **ç¦æ­¢**ï¼šåœ¨é€™äº›åˆ†æ”¯ä¸ŠåšåŠŸèƒ½é–‹ç™¼
  - è£œå……ï¼šè‹¥å°ˆæ¡ˆå°šåœ¨ Pre-Go-Live éšæ®µï¼Œå¯èƒ½æš«æ™‚åªæœ‰ `sit`ï¼›ä»è«‹ç¶­æŒã€Œç’°å¢ƒåˆ†æ”¯åªéƒ¨ç½²ã€åŸå‰‡ï¼Œéƒ¨ç½²ä¾†æºä»¥ `release/*` ç‚ºæº–

### hotfix/*
- ç·šä¸Šç·Šæ€¥ä¿®è£œç”¨
- å¾ prodï¼ˆæˆ–å°æ‡‰ä¸Šç·š tagï¼‰åˆ‡å‡º

---

## 2. æ—¥å¸¸é–‹ç™¼æµç¨‹

### 2.1 é–‹å§‹æ–°åŠŸèƒ½é–‹ç™¼

**æ­¥é©Ÿ 1ï¼šå¾ main åˆ‡å‡ºåŠŸèƒ½åˆ†æ”¯**

```bash
# ç¢ºä¿ main æ˜¯æœ€æ–°çš„
git checkout main
git pull origin main

# åˆ‡å‡ºæ–°åˆ†æ”¯
git checkout -b feature/JIRA-123-login-api
```

**å‘½åå»ºè­°ï¼š**
- `feature/JIRA-123-login-api`
- `bugfix/JIRA-456-fix-timezone`
- `chore/update-deps`

**âš ï¸ é‡è¦ï¼šç¦æ­¢å¾å…¶ä»– feature åˆ†æ”¯åˆ‡å‡ºï¼**

### 2.2 é–‹ç™¼ä¸­åŒæ­¥ç­–ç•¥ï¼ˆé¿å…æœ€å¾Œå¤§è¡çªï¼‰

**æ¯æ—¥åŒæ­¥ main åˆ° featureï¼š**

```bash
# æ–¹æ³• 1ï¼šrebaseï¼ˆæ¨è–¦ï¼Œç¶­æŒä¹¾æ·¨ç·šæ€§æ­·å²ï¼‰
git checkout feature/JIRA-123-login-api
git fetch origin main
git rebase origin/main

# æ–¹æ³• 2ï¼šmergeï¼ˆè¼ƒä¿å®ˆï¼‰
git checkout feature/JIRA-123-login-api
git fetch origin main
git merge origin/main
```

**é »ç‡å»ºè­°ï¼š**
- è‡³å°‘æ¯å¤©ä¸€æ¬¡
- æ¯æ¬¡é–‹å·¥å‰ä¸€æ¬¡
- æäº¤ PR å‰å‹™å¿…åŒæ­¥

### 2.3 å®ŒæˆåŠŸèƒ½å¾Œæäº¤ PR

**PR ç›®çš„åœ°è¦å‰‡ï¼š**

| ä½ çš„åˆ†æ”¯ | PR ç›®çš„åœ° |
|---------|----------|
| `feature/*` | `release/x.y.z` |
| `bugfix/*` | `release/x.y.z` |
| `hotfix/*` | `prod` + `main` |

**âš ï¸ ç¦æ­¢ï¼š`feature/*` â†’ `main`**

**PR æè¿°å¿…å¡«é …ç›®ï¼š**

- **Summary**ï¼šé€™å€‹ PR åšä»€éº¼
- **Scope/Impact**ï¼šå½±éŸ¿ç¯„åœï¼ˆAPI/DB/UI/æ’ç¨‹â€¦ï¼‰
- **Test Evidence**ï¼šæ€éº¼æ¸¬ã€æ¸¬äº†ä»€éº¼ï¼ˆå« SIT é©—è­‰æ–¹å¼ï¼‰
- **Risk**ï¼šå›æ»¾é¢¨éšªã€ç›¸ä¾é …ç›®

### 2.4 PR åˆä½µé–€æª»

ä½ çš„ PR å¿…é ˆæ»¿è¶³ä»¥ä¸‹æ¢ä»¶æ‰èƒ½åˆä½µï¼š

- âœ… CI pipeline å…¨éƒ¨é€šéï¼ˆbuild + unit test + lint ç­‰ï¼‰
- âœ… è‡³å°‘ 1 ä½ reviewer approve
- âœ… æ‰€æœ‰è¨è«–çš„ task å·²è§£æ±º

---

## 3. ä¾è³´åˆ†æ”¯è™•ç†ï¼ˆé‡è¦ï¼‰

### 3.1 åŸºæœ¬åŸå‰‡

- **ç¦æ­¢** feature åˆ†æ”¯ä¹‹é–“é•·æœŸäº’ç›¸å †ç–Š
- **ç¦æ­¢**ï¼šfeature/B å¾ feature/A åˆ‡å‡ºï¼ˆå®¹æ˜“å½¢æˆåˆ†æ”¯æ¨¹åœ°ç„ï¼‰
- æ‰€æœ‰ feature ä¸€å¾‹ä»å¾ main åˆ‡

### 3.2 æƒ…å¢ƒï¼šä½ çš„åŠŸèƒ½ B ä¾è³´åˆ¥äººçš„åŠŸèƒ½ A

**æ¨™æº–åšæ³•ï¼š**

1. ç­‰å¾…åŠŸèƒ½ A å®Œæˆä¸¦åˆä½µåˆ° `release/x.y.z`
2. ä½ ä»å¾ main åˆ‡ `feature/B`
3. ç•¶ä½ éœ€è¦çœ‹åˆ° A çš„åŠŸèƒ½æ™‚ï¼Œåœ¨æœ¬åœ°åŒæ­¥ releaseï¼š

```bash
# åœ¨ feature/B åˆ†æ”¯ä¸Š
git fetch origin release/x.y.z
git merge origin/release/x.y.z
# æˆ–ä½¿ç”¨ rebase
git rebase origin/release/x.y.z
```

**é‡é»**ï¼šä¾è³´çš„ã€ŒåŒ¯åˆé»ã€å›ºå®šåœ¨ releaseï¼Œä¸è¦æŠŠåˆ†æ”¯æ¨¹æ“´æ•£åˆ° feature å±¤

### 3.3 æƒ…å¢ƒï¼šA å°šæœªå®Œæˆä½† B å¿…é ˆå…ˆåš

æ¡ç”¨ **Contract First / Stub**ï¼š

- è«‹ A å…ˆæä¾› interface / DTO / empty implementationï¼ˆå¯å…ˆé€² releaseï¼‰
- ä½ ä»¥å¥‘ç´„é–‹ç™¼ï¼Œç­‰ A çœŸæ­£é‚è¼¯å®Œæˆå¾Œå†æ•´åˆ
- é€™å¯ä»¥é¿å…ä½ è¢« A å®Œå…¨å¡æ­»

---

## 4. Hotfixï¼ˆç·šä¸Šç·Šæ€¥ä¿®è£œï¼‰æµç¨‹

### 4.1 åˆ‡å‡º hotfix åˆ†æ”¯

```bash
# å¾ prod åˆ‡å‡º
git checkout prod
git pull origin prod
git checkout -b hotfix/issue-xxx
```

### 4.2 ä¿®æ­£å¾Œæäº¤ PR

ä¿®æ­£å®Œæˆå¾Œï¼Œéœ€è¦å»ºç«‹å¤šå€‹ PRï¼š

- `hotfix/* â†’ prod`
- `hotfix/* â†’ main`
- `hotfix/* â†’ release/x.y.z`ï¼ˆè‹¥ç›®å‰æœ‰é€²è¡Œä¸­çš„ releaseï¼Œè¦–ç‹€æ³åŒæ­¥ï¼‰

---

## 5. SIT/UAT éšæ®µç™¼ç¾ Bug çš„ä¿®æ­£æµç¨‹

### 5.1 æƒ…å¢ƒèªªæ˜

**æƒ…å¢ƒ**ï¼šåŠŸèƒ½å·²ç¶“æ¨é€²åˆ° `sit` æˆ– `uat` åˆ†æ”¯é€²è¡Œæ¸¬è©¦ï¼Œæ¸¬è©¦éç¨‹ä¸­ç™¼ç¾ bugï¼Œéœ€è¦ä¿®æ­£ã€‚

**é‡è¦åŸå‰‡**ï¼š
- âŒ **ç¦æ­¢**ç›´æ¥åœ¨ `sit` / `uat` åˆ†æ”¯ä¸Šé–‹ç™¼ä¿®æ­£
- âœ… å¿…é ˆå¾ `release/*` åˆ‡å‡º `bugfix/*` åˆ†æ”¯é€²è¡Œä¿®æ­£
- âœ… ä¿®æ­£å¾Œåˆä½µå› `release/*`ï¼Œå†é‡æ–°æ¨é€²åˆ° `sit` / `uat`

### 5.2 æ¨™æº–ä¿®æ­£æµç¨‹

**æ­¥é©Ÿ 1ï¼šå¾ release åˆ‡å‡º bugfix åˆ†æ”¯**

```bash
# ç¢ºä¿ release åˆ†æ”¯æ˜¯æœ€æ–°çš„
git checkout release/x.y.z
git pull origin release/x.y.z

# åˆ‡å‡º bugfix åˆ†æ”¯
git checkout -b bugfix/JIRA-789-fix-login-error
```

**âš ï¸ é‡è¦ï¼šç‚ºä»€éº¼å¾ release åˆ‡åˆ†æ”¯ï¼Œè€Œä¸æ˜¯å¾ feature åˆ†æ”¯ï¼Ÿ**

ç•¶åŠŸèƒ½å·²ç¶“æ¨é€²åˆ° SIT/UAT æ™‚ï¼Œèªªæ˜è©²åŠŸèƒ½å·²ç¶“é€šé PR åˆä½µåˆ° `release/*` åˆ†æ”¯äº†ã€‚æ­¤æ™‚å¿…é ˆå¾ `release/*` åˆ‡å‡º bugfix åˆ†æ”¯ï¼ŒåŸå› å¦‚ä¸‹ï¼š

1. **release æ˜¯æ•´åˆåˆ†æ”¯**ï¼š
   - `release/*` åŒ…å«äº†å¤šå€‹åŠŸèƒ½çš„æ•´åˆç‹€æ…‹
   - å¯èƒ½åŒ…å«å…¶ä»–åŠŸèƒ½çš„ä¿®æ”¹ã€ä¾è³´é—œä¿‚ã€è¡çªè§£æ±ºç­‰
   - å¾åŸå§‹çš„ `feature/*` ä¿®æ­£æœƒéºæ¼é€™äº›æ•´åˆå¾Œçš„è®Šæ›´

2. **ç¢ºä¿ä¿®æ­£åŸºæ–¼æœ€æ–°ç‹€æ…‹**ï¼š
   - `release/*` ä»£è¡¨ç•¶å‰è¦ä¸Šç·šçš„å®Œæ•´ç‰ˆæœ¬ç‹€æ…‹
   - å¾ `release/*` åˆ‡å‡ºå¯ä»¥ç¢ºä¿ä¿®æ­£åŸºæ–¼æ‰€æœ‰å·²åˆä½µåŠŸèƒ½çš„å®Œæ•´ç‹€æ…‹
   - é¿å…ä¿®æ­£å¾Œçš„ç¨‹å¼ç¢¼èˆ‡ release ä¸­å…¶ä»–åŠŸèƒ½ä¸ä¸€è‡´

3. **é¿å…éºæ¼ä¾è³´èˆ‡æ•´åˆè®Šæ›´**ï¼š
   - å…¶ä»–åŠŸèƒ½å¯èƒ½ä¿®æ”¹äº†å…±ç”¨çš„ç¨‹å¼ç¢¼ã€è¨­å®šæª”ã€ä¾è³´ç­‰
   - å¾ `feature/*` ä¿®æ­£å¯èƒ½éºæ¼é€™äº›è®Šæ›´ï¼Œå°è‡´ä¿®æ­£ä¸å®Œæ•´
   - å¾ `release/*` ä¿®æ­£å¯ä»¥ç¢ºä¿åŒ…å«æ‰€æœ‰æ•´åˆå¾Œçš„è®Šæ›´

4. **ç‰ˆæœ¬ä¸€è‡´æ€§**ï¼š
   - å¾ `release/*` åˆ‡å‡ºå¯ä»¥ç¢ºä¿ä¿®æ­£å¾Œçš„ç¨‹å¼ç¢¼èˆ‡ release çš„å…¶ä»–éƒ¨åˆ†ä¿æŒä¸€è‡´
   - ä¿®æ­£å¾Œåˆä½µå› `release/*` æ™‚ï¼Œä¸æœƒå¼•å…¥ä¸ä¸€è‡´çš„è®Šæ›´

5. **æ¸¬è©¦ç’°å¢ƒå°æ‡‰**ï¼š
   - SIT/UAT ç’°å¢ƒæ˜¯åŸºæ–¼ `release/*` éƒ¨ç½²çš„
   - å¾ `release/*` ä¿®æ­£å¯ä»¥ç¢ºä¿ä¿®æ­£å¾Œçš„ç¨‹å¼ç¢¼èˆ‡æ¸¬è©¦ç’°å¢ƒä¸€è‡´

**ç¯„ä¾‹æƒ…å¢ƒï¼š**

å‡è¨­ `release/1.2.0` åŒ…å«ï¼š
- Feature Aï¼šç™»å…¥åŠŸèƒ½ï¼ˆä½ çš„åŠŸèƒ½ï¼‰
- Feature Bï¼šæ”¯ä»˜åŠŸèƒ½ï¼ˆä¿®æ”¹äº†å…±ç”¨çš„ config æª”ï¼‰
- Feature Cï¼šå ±è¡¨åŠŸèƒ½ï¼ˆä¿®æ”¹äº†å…±ç”¨çš„è³‡æ–™åº« schemaï¼‰

å¦‚æœåœ¨ SIT ç™¼ç¾ Feature A æœ‰ bugï¼š
- âŒ **éŒ¯èª¤åšæ³•**ï¼šå¾ `feature/A` åˆ‡å‡º bugfix â†’ æœƒéºæ¼ Feature B å’Œ C çš„è®Šæ›´
- âœ… **æ­£ç¢ºåšæ³•**ï¼šå¾ `release/1.2.0` åˆ‡å‡º bugfix â†’ åŒ…å«æ‰€æœ‰åŠŸèƒ½çš„æ•´åˆç‹€æ…‹

**å‘½åå»ºè­°ï¼š**
- `bugfix/JIRA-789-fix-login-error`
- `bugfix/fix-payment-timeout`
- `bugfix/fix-export-format`

**æ­¥é©Ÿ 2ï¼šä¿®æ­£ Bug**

```bash
# åœ¨ bugfix åˆ†æ”¯ä¸Šé€²è¡Œä¿®æ­£
# ... ä¿®æ­£ç¨‹å¼ç¢¼ ...

# æäº¤ä¿®æ­£
git add .
git commit -m "fix: ä¿®æ­£ç™»å…¥éŒ¯èª¤å•é¡Œ"
```

**æ­¥é©Ÿ 3ï¼šæäº¤ PR åˆ° release**

```bash
# æ¨é€åˆ†æ”¯
git push origin bugfix/JIRA-789-fix-login-error
```

å»ºç«‹ PRï¼š`bugfix/JIRA-789-fix-login-error â†’ release/x.y.z`

**PR æè¿°æ‡‰åŒ…å«ï¼š**
- **Summary**ï¼šä¿®æ­£ä»€éº¼ bug
- **Bug æè¿°**ï¼šåœ¨ SIT/UAT ç™¼ç¾çš„å•é¡Œ
- **ä¿®æ­£æ–¹å¼**ï¼šå¦‚ä½•ä¿®æ­£
- **æ¸¬è©¦æ–¹å¼**ï¼šå¦‚ä½•é©—è­‰ä¿®æ­£æœ‰æ•ˆ
- **å½±éŸ¿ç¯„åœ**ï¼šæ˜¯å¦å½±éŸ¿å…¶ä»–åŠŸèƒ½

**æ­¥é©Ÿ 4ï¼šç­‰å¾… PR å¯©æ ¸èˆ‡åˆä½µ**

- âœ… CI pipeline é€šé
- âœ… Reviewer approve
- âœ… åˆä½µåˆ° `release/x.y.z`

**æ­¥é©Ÿ 5ï¼šé‡æ–°æ¨é€²åˆ° SIT/UAT**

```bash
# åˆä½µå¾Œï¼Œé‡æ–°æ¨é€²åˆ° sit
git checkout sit
git pull origin release/x.y.z
git push origin sit

# æˆ–æ¨é€²åˆ° uat
git checkout uat
git pull origin release/x.y.z
git push origin uat
```

### 5.3 ä¸åŒéšæ®µçš„è™•ç†æ–¹å¼

#### åœ¨ SIT éšæ®µç™¼ç¾ Bug

1. å¾ `release/x.y.z` åˆ‡å‡º `bugfix/*` åˆ†æ”¯
2. ä¿®æ­£å¾Œ PR åˆä½µåˆ° `release/x.y.z`
3. é‡æ–°æ¨é€²åˆ° `sit` é€²è¡Œé©—è­‰
4. é©—è­‰é€šéå¾Œï¼Œç¹¼çºŒæ¨é€²åˆ° `uat`

#### åœ¨ UAT éšæ®µç™¼ç¾ Bug

1. å¾ `release/x.y.z` åˆ‡å‡º `bugfix/*` åˆ†æ”¯
2. ä¿®æ­£å¾Œ PR åˆä½µåˆ° `release/x.y.z`
3. é‡æ–°æ¨é€²åˆ° `sit` é€²è¡Œé©—è­‰ï¼ˆå»ºè­°å…ˆé©—è­‰ï¼‰
4. é©—è­‰é€šéå¾Œï¼Œé‡æ–°æ¨é€²åˆ° `uat`

**æ³¨æ„**ï¼šUAT éšæ®µç™¼ç¾çš„ bugï¼Œå»ºè­°å…ˆå› SIT é©—è­‰ï¼Œç¢ºä¿ä¿®æ­£æ­£ç¢ºã€‚

### 5.4 ç·Šæ€¥æƒ…æ³è™•ç†ï¼ˆä¸å»ºè­°ï¼Œåƒ…é™ç‰¹æ®Šæƒ…æ³ï¼‰

**âš ï¸ åƒ…åœ¨ä»¥ä¸‹æƒ…æ³è€ƒæ…®ï¼š**
- Bug éå¸¸ç·Šæ€¥ï¼Œéœ€è¦ç«‹å³ä¿®æ­£
- ç„¡æ³•ç­‰å¾… PR å¯©æ ¸æµç¨‹
- å·²ç²å¾—åœ˜éšŠè² è²¬äººåŒæ„

**è™•ç†æ–¹å¼ï¼š**

```bash
# 1. åœ¨ sit/uat ä¸Šç›´æ¥ä¿®æ­£ï¼ˆåƒ…é™ç·Šæ€¥æƒ…æ³ï¼‰
git checkout sit  # æˆ– uat
git pull origin sit

# 2. ä¿®æ­£ä¸¦æäº¤
# ... ä¿®æ­£ç¨‹å¼ç¢¼ ...
git add .
git commit -m "fix: ç·Šæ€¥ä¿®æ­£ç™»å…¥éŒ¯èª¤"
git push origin sit

# 3. ç«‹å³åŒæ­¥å› releaseï¼ˆé‡è¦ï¼ï¼‰
git checkout release/x.y.z
git pull origin sit  # æˆ– git cherry-pick <commit-hash>
git push origin release/x.y.z

# 4. åŒæ­¥åˆ°å…¶ä»–ç’°å¢ƒ
git checkout uat
git pull origin release/x.y.z
git push origin uat
```

**å¾ŒçºŒè™•ç†ï¼š**
- äº‹å¾Œå¿…é ˆè£œä¸Šæ­£å¼çš„ bugfix PR
- è¨˜éŒ„ç·Šæ€¥ä¿®æ­£çš„åŸå› 
- æª¢è¨ç‚ºä»€éº¼éœ€è¦ç·Šæ€¥ä¿®æ­£

### 5.5 æ³¨æ„äº‹é …

- **ç¦æ­¢ç›´æ¥åœ¨ç’°å¢ƒåˆ†æ”¯é–‹ç™¼**ï¼š`sit` / `uat` / `prod` æ˜¯éƒ¨ç½²åˆ†æ”¯ï¼Œä¸æ˜¯é–‹ç™¼åˆ†æ”¯
- **å¿…é ˆåŒæ­¥å› release**ï¼šæ‰€æœ‰ä¿®æ­£éƒ½å¿…é ˆå›åˆ° `release/*`ï¼Œç¢ºä¿ç‰ˆæœ¬ä¸€è‡´æ€§
- **è¨˜éŒ„ä¿®æ­£åŸå› **ï¼šåœ¨ PR æˆ– issue ä¸­è¨˜éŒ„ç™¼ç¾çš„å•é¡Œå’Œä¿®æ­£æ–¹å¼
- **é©—è­‰ä¿®æ­£æœ‰æ•ˆ**ï¼šä¿®æ­£å¾Œå¿…é ˆé‡æ–°æ¸¬è©¦ï¼Œç¢ºèªå•é¡Œå·²è§£æ±º
- **è€ƒæ…®å½±éŸ¿ç¯„åœ**ï¼šä¿®æ­£å¯èƒ½å½±éŸ¿å…¶ä»–åŠŸèƒ½ï¼Œéœ€è¦å…¨é¢æ¸¬è©¦

---

## 6. å¸¸è¦‹å•é¡Œï¼ˆFAQï¼‰

### Q1ï¼šèƒ½ä¸èƒ½è®“æœªä¸Šç·šåŠŸèƒ½é€² mainï¼Ÿ

**ä¸å»ºè­°**ã€‚å°å‹åœ˜éšŠè³‡æºæœ‰é™ï¼Œmain å¿…é ˆä¿æŒç©©å®šå¯éƒ¨ç½²ç‹€æ…‹ã€‚æœªç¢ºå®šä¸Šç·šçš„åŠŸèƒ½é€² main æœƒå¢åŠ å›æ»¾é¢¨éšªï¼Œä¸”å®¹æ˜“é€ æˆç‰ˆæœ¬æ··äº‚ã€‚

### Q2ï¼šè¡çªæ˜¯ä¸æ˜¯éƒ½é›†ä¸­åœ¨ releaseï¼Ÿ

æœ‰å¯èƒ½ï¼Œå› æ­¤éœ€è¦ï¼š
- release æ—©åˆ‡ï¼ˆç”±åœ˜éšŠè² è²¬äººè™•ç†ï¼‰
- feature æ¯æ—¥åŒæ­¥ mainï¼ˆä½ çš„è²¬ä»»ï¼‰
- PR å°æ­¥æäº¤

### Q3ï¼šå¦‚æœæŸåŠŸèƒ½æœ€å¾Œä¸æƒ³ä¸Šç·šï¼Ÿ

ä¸è¦åˆä½µåˆ° release/*ã€‚è‹¥å·²åˆä½µé€² releaseï¼Œåªèƒ½ revertï¼ˆæ‰€ä»¥ freeze å‰è¦æ§å¥½ï¼‰ã€‚

### Q4ï¼šæˆ‘çš„åŠŸèƒ½åœ¨ SIT é©—è­‰å¤±æ•—ï¼Œè¢«å¾ release ä¸­ç§»é™¤äº†ï¼Œè©²æ€éº¼è¾¦ï¼Ÿ

**æƒ…å¢ƒ**ï¼šä½ çš„åŠŸèƒ½å·²åˆä½µåˆ° releaseï¼Œä½†åœ¨ SIT æ¸¬è©¦ä¸­é©—è­‰å¤±æ•—ï¼Œåœ˜éšŠæ±ºå®šå¾ release ä¸­ç§»é™¤è©²åŠŸèƒ½ï¼Œè®“å…¶ä»–åŠŸèƒ½ç¹¼çºŒæ¨é€²åˆ° UATã€‚

**è™•ç†æ–¹å¼ï¼š**

1. **ç¢ºèªåŠŸèƒ½å·²è¢«ç§»é™¤**
   - æŸ¥çœ‹ release åˆ†æ”¯ï¼Œç¢ºèªä½ çš„åŠŸèƒ½å·²è¢« revert
   - èˆ‡åœ˜éšŠç¢ºèªç§»é™¤åŸå› å’Œå¾ŒçºŒè¨ˆåŠƒ

2. **ä¿®æ­£å•é¡Œ**
   - å›åˆ°ä½ çš„ feature åˆ†æ”¯ç¹¼çºŒä¿®æ­£å•é¡Œ
   - ç¢ºä¿å•é¡Œå·²å®Œå…¨è§£æ±º
   - åŠ å¼·æ¸¬è©¦è¦†è“‹

3. **ç­‰å¾…ä¸‹ä¸€å€‹ release ç‰ˆæœ¬**
   - ä¿®æ­£å®Œæˆå¾Œï¼Œç­‰å¾…ä¸‹ä¸€å€‹ release ç‰ˆæœ¬å»ºç«‹
   - é‡æ–°æäº¤ PR åˆ°æ–°çš„ release åˆ†æ”¯
   - æˆ–è©¢å•åœ˜éšŠæ˜¯å¦å¯åŠ å…¥ç•¶å‰ releaseï¼ˆéœ€åœ˜éšŠè©•ä¼°ï¼‰

4. **é¿å…é‡è¤‡å•é¡Œ**
   - æª¢è¨ç‚ºä»€éº¼åœ¨ SIT æ‰ç™¼ç¾å•é¡Œ
   - åŠ å¼·æœ¬åœ°æ¸¬è©¦å’Œ PR å‰çš„é©—è­‰
   - èˆ‡ QA åœ˜éšŠç¢ºèªæ¸¬è©¦æ¨™æº–

**æ³¨æ„äº‹é …ï¼š**
- ä¸è¦ç›´æ¥åœ¨ release åˆ†æ”¯ä¸Šä¿®æ­£ï¼ˆrelease å·²ç§»é™¤ä½ çš„åŠŸèƒ½ï¼‰
- ä¸è¦é‡æ–°æäº¤åˆ°å·²æ¨é€²åˆ° UAT çš„ releaseï¼ˆæœƒé€ æˆç‰ˆæœ¬æ··äº‚ï¼‰
- ä¿æŒ feature åˆ†æ”¯èˆ‡ main åŒæ­¥ï¼Œç‚ºä¸‹ä¸€å€‹ release åšæº–å‚™

### Q5ï¼šåœ¨ SIT/UAT éšæ®µç™¼ç¾ Bugï¼Œå¯ä»¥ç›´æ¥åœ¨ç’°å¢ƒåˆ†æ”¯ä¸Šä¿®æ­£å—ï¼Ÿ

**ä¸å¯ä»¥**ã€‚å¿…é ˆéµå¾ªæ¨™æº–æµç¨‹ï¼š

1. **å¾ release åˆ‡å‡º bugfix åˆ†æ”¯**
   ```bash
   git checkout release/x.y.z
   git checkout -b bugfix/JIRA-789-fix-issue
   ```

2. **ä¿®æ­£ä¸¦æäº¤ PR åˆ° release**
   - PRï¼š`bugfix/* â†’ release/x.y.z`
   - ç­‰å¾…å¯©æ ¸èˆ‡åˆä½µ

3. **é‡æ–°æ¨é€²åˆ°ç’°å¢ƒ**
   ```bash
   git checkout sit  # æˆ– uat
   git pull origin release/x.y.z
   git push origin sit
   ```

**ç‚ºä»€éº¼ä¸èƒ½ç›´æ¥åœ¨ç’°å¢ƒåˆ†æ”¯ä¿®æ­£ï¼Ÿ**
- `sit` / `uat` æ˜¯éƒ¨ç½²åˆ†æ”¯ï¼Œä¸æ˜¯é–‹ç™¼åˆ†æ”¯
- ç›´æ¥ä¿®æ­£æœƒé€ æˆç‰ˆæœ¬ä¸ä¸€è‡´
- ä¿®æ­£å¿…é ˆå›åˆ° `release/*`ï¼Œç¢ºä¿æ‰€æœ‰ç’°å¢ƒåŒæ­¥

**ç‚ºä»€éº¼è¦å¾ release åˆ‡åˆ†æ”¯ï¼Œè€Œä¸æ˜¯å¾ feature åˆ†æ”¯ï¼Ÿ**

ç•¶åŠŸèƒ½å·²ç¶“æ¨é€²åˆ° SIT/UAT æ™‚ï¼Œè©²åŠŸèƒ½å·²ç¶“åˆä½µåˆ° `release/*` äº†ã€‚æ­¤æ™‚ `release/*` åŒ…å«äº†å¤šå€‹åŠŸèƒ½çš„æ•´åˆç‹€æ…‹ï¼ŒåŒ…æ‹¬ï¼š
- å…¶ä»–åŠŸèƒ½çš„ä¿®æ”¹
- è¡çªè§£æ±º
- å…±ç”¨çš„è¨­å®šæª”ã€ä¾è³´ç­‰è®Šæ›´

å¦‚æœå¾åŸå§‹çš„ `feature/*` ä¿®æ­£ï¼Œæœƒéºæ¼é€™äº›æ•´åˆè®Šæ›´ï¼Œå°è‡´ä¿®æ­£ä¸å®Œæ•´æˆ–èˆ‡ release ä¸­å…¶ä»–åŠŸèƒ½ä¸ä¸€è‡´ã€‚å› æ­¤å¿…é ˆå¾ `release/*` åˆ‡å‡º bugfix åˆ†æ”¯ï¼Œç¢ºä¿ä¿®æ­£åŸºæ–¼å®Œæ•´çš„æ•´åˆç‹€æ…‹ã€‚

**è©³ç´°æµç¨‹è«‹åƒè€ƒ [5. SIT/UAT éšæ®µç™¼ç¾ Bug çš„ä¿®æ­£æµç¨‹](#5-situat-éšæ®µç™¼ç¾-bug-çš„ä¿®æ­£æµç¨‹)**

### Q6ï¼šSIT èƒ½ä¸èƒ½ç•¶é–‹ç™¼ä¸»ç·šï¼Ÿ

**ä¸å»ºè­°**ã€‚SIT æ˜¯ç’°å¢ƒåˆ†æ”¯ï¼Œæœƒè®“ä¸Šç·šå…§å®¹ä¸å¯æ§ã€‚

### Q7ï¼šå¦‚ä½•çŸ¥é“ç›®å‰çš„ release åˆ†æ”¯åç¨±ï¼Ÿ

è©¢å•åœ˜éšŠè² è²¬äººæˆ–æŸ¥çœ‹ Bitbucket çš„ branch åˆ—è¡¨ï¼Œé€šå¸¸æ ¼å¼ç‚º `release/x.y.z`ã€‚

---

## 6. å¿«é€Ÿåƒè€ƒ

### é–‹ç™¼æµç¨‹æª¢æŸ¥æ¸…å–®

- [ ] å¾ main åˆ‡å‡ºåŠŸèƒ½åˆ†æ”¯
- [ ] æ¯æ—¥åŒæ­¥ main åˆ° feature
- [ ] å®ŒæˆåŠŸèƒ½å¾Œå»ºç«‹ PR åˆ° `release/x.y.z`
- [ ] PR æè¿°åŒ…å« Summaryã€Scopeã€Test Evidenceã€Risk
- [ ] ç­‰å¾… CI é€šéå’Œ reviewer approve
- [ ] åˆä½µå¾Œåˆªé™¤æœ¬åœ°åˆ†æ”¯

### ç¦æ­¢äº‹é …

- âŒ ç¦æ­¢ `feature/*` â†’ `main`
- âŒ ç¦æ­¢å¾å…¶ä»– feature åˆ†æ”¯åˆ‡å‡º
- âŒ ç¦æ­¢ç›´æ¥ push åˆ° `main` / `release/*` / `prod`
- âŒ ç¦æ­¢åœ¨ `sit` / `uat` / `prod` ä¸Šé–‹ç™¼åŠŸèƒ½

---

# ç¬¬äºŒéƒ¨åˆ†ï¼šå¯©æ ¸äººå“¡æŒ‡å—

## 0. ç­–ç•¥æ¦‚è¿°

æœ¬åœ˜éšŠæ¡ç”¨ã€ŒRelease Branch ä½œç‚ºæ•´åˆèˆ‡ä¸Šç·šæ¸…å–®ã€çš„æ¨¡å¼ï¼Œé©åˆå°å‹åœ˜éšŠï¼ˆ3-8 äººï¼‰çš„é–‹ç™¼æµç¨‹ã€‚

> **ğŸ’¡ åœ˜éšŠè¦æ¨¡æ“´å¤§æ™‚çš„æ¼”é€²å»ºè­°**ï¼šç•¶åœ˜éšŠè¦æ¨¡è¶…é 8 äººï¼Œæˆ–ä¸¦è¡Œé–‹ç™¼çš„åŠŸèƒ½æ•¸é‡å¤§å¹…å¢åŠ æ™‚ï¼Œå»ºè­°å°å…¥ **Feature Toggle** æ©Ÿåˆ¶ã€‚å°å…¥å¾Œå¯å…è¨±æœªä¸Šç·šåŠŸèƒ½é€²å…¥ mainï¼ˆé€é toggle æ§åˆ¶é–‹é—œï¼‰ï¼Œä»¥é™ä½ release åˆ†æ”¯çš„æ•´åˆå£“åŠ›ï¼Œæå‡é–‹ç™¼æ•ˆç‡ã€‚è©³è¦‹ [8. åœ˜éšŠè¦æ¨¡æ“´å¤§æ™‚çš„ç­–ç•¥æ¼”é€²](#8-åœ˜éšŠè¦æ¨¡æ“´å¤§æ™‚çš„ç­–ç•¥æ¼”é€²)ã€‚

---

## 1. PR è¦ç¯„èˆ‡å¯©æ ¸æ¨™æº–

### 1.1 PR ç›®çš„åœ°è¦å‰‡ï¼ˆåš´æ ¼åŸ·è¡Œï¼‰

| PR ä¾†æº | PR ç›®çš„åœ° | å‚™è¨» |
|---------|----------|------|
| `feature/*` | `release/*` | âœ… æ¨™æº–æµç¨‹ |
| `bugfix/*` | `release/*` | âœ… æ¨™æº–æµç¨‹ |
| `release/*` | `main` | âœ… ä¸Šç·šå®Œæˆå¾Œ |
| `hotfix/*` | `prod` + `main` | âœ… ç·Šæ€¥ä¿®è£œ |
| `hotfix/*` | `release/*` | âš ï¸ è¦–ç‹€æ³åŒæ­¥ |

**ç¦æ­¢äº‹é …ï¼š**
- âŒ `feature/*` â†’ `main`ï¼ˆé™¤éæ˜¯ç´”æ–‡ä»¶/å°ä¿®ä¸”æ˜ç¢ºåŒç‰ˆæœ¬ä¸Šç·šï¼Œä¸”ç”±åœ˜éšŠè² è²¬äººç‰¹åˆ¥å…è¨±ï¼‰

### 1.2 PR å¿…å¡«è³‡è¨Šæª¢æŸ¥æ¸…å–®

å¯©æ ¸ PR æ™‚ï¼Œç¢ºèªä»¥ä¸‹é …ç›®ï¼š

- [ ] **Summary**ï¼šæ¸…æ¥šèªªæ˜é€™å€‹ PR åšä»€éº¼
- [ ] **Scope/Impact**ï¼šæ˜ç¢ºæ¨™ç¤ºå½±éŸ¿ç¯„åœï¼ˆAPI/DB/UI/æ’ç¨‹â€¦ï¼‰
- [ ] **Test Evidence**ï¼šèªªæ˜æ€éº¼æ¸¬ã€æ¸¬äº†ä»€éº¼ï¼ˆå« SIT é©—è­‰æ–¹å¼ï¼‰
- [ ] **Risk**ï¼šè©•ä¼°å›æ»¾é¢¨éšªã€ç›¸ä¾é …ç›®

### 1.3 PR Gateï¼ˆåˆä½µé–€æª»ï¼‰

åˆä½µå‰å¿…é ˆæ»¿è¶³ï¼š

- [ ] CI pipeline å…¨éƒ¨é€šéï¼ˆbuild + unit test + lint ç­‰ï¼‰
- [ ] è‡³å°‘ 1 ä½ reviewer approveï¼ˆå°å‹åœ˜éšŠé€šå¸¸ 1 ä½å³å¯ï¼‰
- [ ] æ‰€æœ‰è¨è«–çš„ task å·²è§£æ±º
- [ ] ä¸å…è¨± direct push åˆ° main / release/* / prod

### 1.4 å¯©æ ¸é‡é»

**ç¨‹å¼ç¢¼å“è³ªï¼š**
- æ˜¯å¦ç¬¦åˆåœ˜éšŠ coding style
- æ˜¯å¦æœ‰é©ç•¶çš„éŒ¯èª¤è™•ç†
- æ˜¯å¦æœ‰é©ç•¶çš„æ¸¬è©¦è¦†è“‹

**åˆ†æ”¯ç­–ç•¥ï¼š**
- PR ä¾†æºèˆ‡ç›®çš„åœ°æ˜¯å¦ç¬¦åˆè¦ç¯„
- æ˜¯å¦æœ‰ä¸å¿…è¦çš„ merge commit
- åˆ†æ”¯å‘½åæ˜¯å¦ç¬¦åˆè¦ç¯„

**å½±éŸ¿ç¯„åœï¼š**
- æ˜¯å¦å½±éŸ¿å…¶ä»–åŠŸèƒ½
- æ˜¯å¦éœ€è¦è³‡æ–™åº«é·ç§»
- æ˜¯å¦éœ€è¦ç’°å¢ƒè®Šæ•¸èª¿æ•´

---

## 2. åˆ†æ”¯ä¿è­·è¦å‰‡ï¼ˆBitbucket è¨­å®šï¼‰

### 2.1 å—ä¿è­·çš„åˆ†æ”¯åˆ—è¡¨

ä»¥ä¸‹åˆ†æ”¯**ç¦æ­¢ç›´æ¥åˆä½µ**ï¼Œå¿…é ˆé€é Pull Request é€²è¡Œåˆä½µï¼š

> è£œå……ï¼ˆPre-Go-Liveï¼‰ï¼šè‹¥ç›®å‰å°šæœªå»ºç«‹ `uat` / `prod`ï¼Œå…ˆå°å·²å­˜åœ¨çš„åˆ†æ”¯ï¼ˆè‡³å°‘ `main`ã€`release/*`ã€`sit`ï¼‰å¥—ç”¨ä¿è­·è¦å‰‡å³å¯ï¼›ç­‰åˆ†æ”¯å»ºç«‹å¾Œå†è£œä¸Šå°æ‡‰è¦å‰‡ã€‚

| åˆ†æ”¯æ¨¡å¼ | ä¿è­·åŸå›  | å…è¨±çš„ PR ä¾†æº |
|---------|---------|---------------|
| `main` | ä¸»ç·šåˆ†æ”¯ï¼Œå¿…é ˆä¿æŒç©©å®š | `release/*`, `hotfix/*` |
| `release/*` | ç‰ˆæœ¬æ•´åˆåˆ†æ”¯ï¼Œéœ€æ§åˆ¶æ•´åˆå“è³ª | `feature/*`, `bugfix/*`, `hotfix/*` |
| `prod` | ç”Ÿç”¢ç’°å¢ƒåˆ†æ”¯ï¼Œç›´æ¥å½±éŸ¿ç·šä¸Šæœå‹™ | `release/*`, `hotfix/*` |
| `uat` | UAT ç’°å¢ƒåˆ†æ”¯ï¼Œéœ€ç¢ºä¿æ¸¬è©¦å“è³ª | `release/*`, `hotfix/*` |
| `sit` | SIT ç’°å¢ƒåˆ†æ”¯ï¼Œéœ€ç¢ºä¿æ•´åˆæ¸¬è©¦å“è³ª | `release/*`, `hotfix/*` |

### 2.2 Bitbucket åˆ†æ”¯ä¿è­·è¨­å®šæ­¥é©Ÿ

1. **é€²å…¥ Repository Settings**
   - å°èˆªè‡³ï¼š`Repository Settings` â†’ `Branch permissions`

2. **ç‚ºæ¯å€‹å—ä¿è­·åˆ†æ”¯è¨­å®šè¦å‰‡**

   **main åˆ†æ”¯ä¿è­·è¦å‰‡ï¼š**
   ```
   Branch name: main
   - âœ… Restrict pushes
   - âœ… Restrict deletions
   - âœ… Require pull request approvals: 1
   - âœ… Require passing builds: æ‰€æœ‰ CI pipeline
   - âœ… Require all tasks to be resolved
   - âœ… Prevent force pushes
   - âœ… Prevent deletion of the branch
   ```

   **release/* åˆ†æ”¯ä¿è­·è¦å‰‡ï¼š**
   ```
   Branch name pattern: release/*
   - âœ… Restrict pushes
   - âœ… Restrict deletions
   - âœ… Require pull request approvals: 1
   - âœ… Require passing builds: æ‰€æœ‰ CI pipeline
   - âœ… Prevent force pushes
   - âœ… Prevent deletion of the branch
   ```

   **prod åˆ†æ”¯ä¿è­·è¦å‰‡ï¼š**
   ```
   Branch name: prod
   - âœ… Restrict pushes
   - âœ… Restrict deletions
   - âœ… Require pull request approvals: 2ï¼ˆå»ºè­°æé«˜å¯©æŸ¥é–€æª»ï¼‰
   - âœ… Require passing builds: æ‰€æœ‰ CI pipeline
   - âœ… Require all tasks to be resolved
   - âœ… Prevent force pushes
   - âœ… Prevent deletion of the branch
   ```

   **uat åˆ†æ”¯ä¿è­·è¦å‰‡ï¼š**
   ```
   Branch name: uat
   - âœ… Restrict pushes
   - âœ… Restrict deletions
   - âœ… Require pull request approvals: 1
   - âœ… Require passing builds: æ‰€æœ‰ CI pipeline
   - âœ… Prevent force pushes
   ```

   **sit åˆ†æ”¯ä¿è­·è¦å‰‡ï¼š**
   ```
   Branch name: sit
   - âœ… Restrict pushes
   - âœ… Restrict deletions
   - âœ… Require pull request approvals: 1
   - âœ… Require passing builds: æ‰€æœ‰ CI pipeline
   - âœ… Prevent force pushes
   ```

3. **è¨­å®šä¾‹å¤–è¦å‰‡ï¼ˆå¯é¸ï¼‰**

   å¦‚æœéœ€è¦å…è¨±ç‰¹å®šè§’è‰²ï¼ˆå¦‚ Repository Adminï¼‰åœ¨ç·Šæ€¥æƒ…æ³ä¸‹ç›´æ¥æ¨é€ï¼Œå¯è¨­å®šä¾‹å¤–ï¼š
   - ä¾‹å¤–è§’è‰²ï¼š`Repository Administrators`
   - ä½¿ç”¨å ´æ™¯ï¼šåƒ…é™ç·Šæ€¥ hotfix æˆ–ç³»çµ±ç¶­è­·

### 2.3 é©—è­‰ä¿è­·è¦å‰‡

è¨­å®šå®Œæˆå¾Œï¼Œé©—è­‰æ–¹å¼ï¼š

1. å˜—è©¦ç›´æ¥ push åˆ°å—ä¿è­·åˆ†æ”¯ï¼ˆæ‡‰è¢«æ‹’çµ•ï¼‰
2. å˜—è©¦å»ºç«‹ PR ä½†æœªé€šé CIï¼ˆæ‡‰è¢«é˜»æ­¢åˆä½µï¼‰
3. å˜—è©¦å»ºç«‹ PR ä½†æœªç²å¾— approveï¼ˆæ‡‰è¢«é˜»æ­¢åˆä½µï¼‰

### 2.4 æ³¨æ„äº‹é …

- åˆ†æ”¯ä¿è­·è¦å‰‡è¨­å®šå¾Œï¼Œ**æ‰€æœ‰åœ˜éšŠæˆå“¡**éƒ½å¿…é ˆéµå®ˆï¼ŒåŒ…æ‹¬ Repository Administratorsï¼ˆé™¤éè¨­å®šä¾‹å¤–ï¼‰
- å®šæœŸæª¢æŸ¥åˆ†æ”¯ä¿è­·è¦å‰‡æ˜¯å¦æ­£ç¢ºå¥—ç”¨
- æ–°å¢ release åˆ†æ”¯æ™‚ï¼Œéœ€ç¢ºèªåˆ†æ”¯ä¿è­·è¦å‰‡å·²è‡ªå‹•å¥—ç”¨ï¼ˆä½¿ç”¨ pattern `release/*`ï¼‰

---

## 3. Release ç®¡ç†æµç¨‹

### 3.1 Release å»ºç«‹æ™‚æ©Ÿ

- ç‰ˆæœ¬é€±æœŸé–‹å§‹æˆ– sprint è¦åŠƒç¢ºèªå¾Œå°±åˆ‡ `release/x.y.z`
- **ä¸è¦ä¸Šç·šå‰ä¸€å¤©æ‰åˆ‡**ï¼ˆå°å‹åœ˜éšŠæ›´éœ€è¦æå‰æ•´åˆï¼Œé¿å…è¡çªé›†ä¸­çˆ†ç™¼ï¼‰

**å»ºç«‹ release åˆ†æ”¯ï¼š**

```bash
git checkout main
git pull origin main
git checkout -b release/1.2.0
git push origin release/1.2.0
```

### 3.2 æ¨é€²é †åº

```
(æœ€å°é›†ï¼šåªæœ‰ sit)  release/x.y.z â†’ sit
(å®Œæ•´æµç¨‹)          release/x.y.z â†’ sit â†’ uat â†’ prod
```

- **SIT**ï¼šæ•´åˆæ¸¬è©¦ç’°å¢ƒï¼ˆåé–‹ç™¼é©—è­‰ï¼‰
- **UAT**ï¼šæ¥­å‹™é©—è­‰ç’°å¢ƒï¼ˆç‰ˆæœ¬ freeze å¾Œè¼ƒç©©å®šï¼‰
- **PROD**ï¼šæ­£å¼ä¸Šç·š

### 3.3 SIT éšæ®µéƒ¨åˆ†åŠŸèƒ½é©—è­‰å¤±æ•—è™•ç†

**æƒ…å¢ƒ**ï¼šSIT æ¸¬è©¦ä¸­ï¼ŒæŸäº›åŠŸèƒ½é©—è­‰å¤±æ•—ï¼Œéœ€è¦å¾ release ä¸­ç§»é™¤ï¼Œä½†å…¶ä»–åŠŸèƒ½è¦ç¹¼çºŒæ¨é€²åˆ° UATã€‚

#### è™•ç†æ–¹å¼

**æ–¹æ³• 1ï¼šRevert ç‰¹å®šåŠŸèƒ½çš„ commitï¼ˆæ¨è–¦ï¼‰**

é©ç”¨æ–¼ï¼šåŠŸèƒ½å·²åˆä½µåˆ° releaseï¼Œä½†éœ€è¦ç§»é™¤

**æ­¥é©Ÿï¼š**

1. **è­˜åˆ¥è¦ç§»é™¤çš„åŠŸèƒ½ commit**
   ```bash
   # æŸ¥çœ‹ release åˆ†æ”¯çš„ commit æ­·å²
   git checkout release/x.y.z
   git log --oneline
   # æ‰¾åˆ°è¦ç§»é™¤çš„åŠŸèƒ½ç›¸é—œ commitï¼ˆå¯èƒ½æœ‰å¤šå€‹ï¼‰
   ```

2. **Revert ç›¸é—œ commit**
   ```bash
   # å¾æœ€æ–°çš„ commit é–‹å§‹ revertï¼ˆå¦‚æœæœ‰å¤šå€‹ commitï¼Œä¾åº revertï¼‰
   git revert <commit-hash-1> <commit-hash-2> ...
   # æˆ–ä½¿ç”¨ commit range
   git revert <old-commit>..<new-commit>
   ```

3. **æäº¤ revert commit**
   ```bash
   git commit -m "revert: ç§»é™¤ feature/XXXï¼ˆSIT é©—è­‰å¤±æ•—ï¼‰"
   git push origin release/x.y.z
   ```

4. **è¨˜éŒ„ç§»é™¤çš„åŠŸèƒ½**
   - åœ¨ PR æˆ– issue ä¸­è¨˜éŒ„ç§»é™¤åŸå› 
   - æ¨™è¨˜è©²åŠŸèƒ½å¾…å¾ŒçºŒç‰ˆæœ¬è™•ç†

5. **ç¹¼çºŒæ¨é€²å…¶ä»–åŠŸèƒ½åˆ° UAT**
   ```bash
   # revert å¾Œï¼Œrelease åˆ†æ”¯å·²ç§»é™¤å¤±æ•—åŠŸèƒ½
   # å¯ä»¥ç›´æ¥æ¨é€²åˆ° UAT
   git checkout uat
   git merge release/x.y.z
   git push origin uat
   ```

**æ–¹æ³• 2ï¼šå»ºç«‹æ–°çš„ release åˆ†æ”¯ï¼ˆé©ç”¨æ–¼å¤§é‡åŠŸèƒ½éœ€è¦ç§»é™¤ï¼‰**

é©ç”¨æ–¼ï¼šéœ€è¦ç§»é™¤çš„åŠŸèƒ½å¤ªå¤šï¼Œrevert æœƒé€ æˆå¤§é‡è¡çª

**æ­¥é©Ÿï¼š**

1. **å¾ç•¶å‰ release å»ºç«‹æ–°åˆ†æ”¯**
   ```bash
   git checkout release/x.y.z
   git checkout -b release/x.y.z-clean
   ```

2. **ä½¿ç”¨ interactive rebase ç§»é™¤ç‰¹å®š commit**
   ```bash
   git rebase -i <base-commit>
   # åœ¨ç·¨è¼¯å™¨ä¸­ï¼Œå°‡è¦ç§»é™¤çš„ commit æ¨™è¨˜ç‚º drop æˆ–åˆªé™¤è©²è¡Œ
   ```

3. **æˆ–ä½¿ç”¨ cherry-pick é¸æ“‡è¦ä¿ç•™çš„åŠŸèƒ½**
   ```bash
   # å¾ release/x.y.z æ‰¾å‡ºè¦ä¿ç•™çš„åŠŸèƒ½ commit
   git log release/x.y.z --oneline
   # åœ¨æ–°çš„ release åˆ†æ”¯ä¸Š cherry-pick è¦ä¿ç•™çš„ commit
   git cherry-pick <commit-hash-1> <commit-hash-2> ...
   ```

4. **æ¨é€²æ–°åˆ†æ”¯åˆ° UAT**
   ```bash
   git checkout uat
   git merge release/x.y.z-clean
   git push origin uat
   ```

#### æ³¨æ„äº‹é …

- **Revert vs æ–°åˆ†æ”¯é¸æ“‡**ï¼š
  - å°‘é‡åŠŸèƒ½å¤±æ•—ï¼šä½¿ç”¨ revertï¼ˆä¿ç•™å®Œæ•´æ­·å²ï¼‰
  - å¤§é‡åŠŸèƒ½å¤±æ•—æˆ–è¤‡é›œä¾è³´ï¼šè€ƒæ…®æ–°åˆ†æ”¯

- **åŠŸèƒ½ä¾è³´è™•ç†**ï¼š
  - å¦‚æœå…¶ä»–åŠŸèƒ½ä¾è³´å¤±æ•—çš„åŠŸèƒ½ï¼Œéœ€è¦ä¸€ä½µè™•ç†
  - æª¢æŸ¥æ˜¯å¦æœ‰å…¶ä»–åŠŸèƒ½æœƒå—å½±éŸ¿

- **å¾ŒçºŒè™•ç†**ï¼š
  - å¤±æ•—çš„åŠŸèƒ½æ‡‰å›åˆ° feature åˆ†æ”¯ç¹¼çºŒä¿®æ­£
  - ä¿®æ­£å®Œæˆå¾Œï¼Œå¯åˆä½µåˆ°ä¸‹ä¸€å€‹ release ç‰ˆæœ¬
  - è¨˜éŒ„å¤±æ•—åŸå› ï¼Œé¿å…é‡è¤‡å•é¡Œ

- **æºé€šèˆ‡è¨˜éŒ„**ï¼š
  - é€šçŸ¥ç›¸é—œé–‹ç™¼äººå“¡åŠŸèƒ½å·²å¾ release ç§»é™¤
  - åœ¨ release note ä¸­è¨˜éŒ„ç§»é™¤çš„åŠŸèƒ½
  - æ›´æ–°å°ˆæ¡ˆç®¡ç†å·¥å…·ï¼ˆJIRA ç­‰ï¼‰çš„ç‹€æ…‹

#### ç¯„ä¾‹æƒ…å¢ƒ

**æƒ…å¢ƒï¼šrelease/1.2.0 åŒ…å« 3 å€‹åŠŸèƒ½**
- Feature Aï¼šç™»å…¥åŠŸèƒ½ âœ… SIT é€šé
- Feature Bï¼šæ”¯ä»˜åŠŸèƒ½ âŒ SIT å¤±æ•—ï¼ˆéœ€è¦ç§»é™¤ï¼‰
- Feature Cï¼šå ±è¡¨åŠŸèƒ½ âœ… SIT é€šé

**è™•ç†æ­¥é©Ÿï¼š**

```bash
# 1. åˆ‡æ›åˆ° release åˆ†æ”¯
git checkout release/1.2.0

# 2. æ‰¾å‡º Feature B çš„ commit
git log --oneline --grep="æ”¯ä»˜"  # æˆ–æŸ¥çœ‹ PR è¨˜éŒ„

# 3. Revert Feature B çš„ commit
git revert <feature-b-commit-hash>

# 4. æäº¤ revert
git commit -m "revert: ç§»é™¤æ”¯ä»˜åŠŸèƒ½ï¼ˆSIT é©—è­‰å¤±æ•—ï¼Œå¾…ä¸‹ç‰ˆæœ¬è™•ç†ï¼‰"
git push origin release/1.2.0

# 5. æ¨é€²åˆ° UATï¼ˆç¾åœ¨åªåŒ…å« Feature A å’Œ Cï¼‰
git checkout uat
git merge release/1.2.0
git push origin uat
```

### 3.4 Release Freezeï¼ˆå»ºè­°ï¼‰

**UAT å‰**ï¼šé€²å…¥ freeze

freeze å¾Œ release åƒ…å…è¨±ï¼š

- âœ… bug fix
- âœ… è¨­å®šèª¿æ•´
- âœ… release note / version bump

**freeze å¾Œç¦æ­¢æ–°å¢åŠŸèƒ½**

### 3.5 Release å®Œæˆå¾Œåˆä½µåˆ° main

ç•¶ release æˆåŠŸä¸Šç·šåˆ° prod å¾Œï¼š

```bash
# å»ºç«‹ PR: release/x.y.z â†’ main
# åˆä½µå¾Œï¼Œmain å³ä»£è¡¨æœ€æ–°ä¸Šç·šç‰ˆæœ¬
```

### 3.6 SIT/UAT éšæ®µç™¼ç¾ Bug çš„ä¿®æ­£æµç¨‹

**æƒ…å¢ƒ**ï¼šåŠŸèƒ½å·²ç¶“æ¨é€²åˆ° `sit` æˆ– `uat` åˆ†æ”¯é€²è¡Œæ¸¬è©¦ï¼Œæ¸¬è©¦éç¨‹ä¸­ç™¼ç¾ bugï¼Œéœ€è¦ä¿®æ­£ã€‚

#### è™•ç†åŸå‰‡

- âŒ **ç¦æ­¢**ç›´æ¥åœ¨ `sit` / `uat` åˆ†æ”¯ä¸Šé–‹ç™¼ä¿®æ­£
- âœ… å¿…é ˆå¾ `release/*` åˆ‡å‡º `bugfix/*` åˆ†æ”¯é€²è¡Œä¿®æ­£
- âœ… ä¿®æ­£å¾Œåˆä½µå› `release/*`ï¼Œå†é‡æ–°æ¨é€²åˆ° `sit` / `uat`
- âœ… ç¢ºä¿æ‰€æœ‰ä¿®æ­£éƒ½å›åˆ° `release/*`ï¼Œä¿æŒç‰ˆæœ¬ä¸€è‡´æ€§

#### æ¨™æº–æµç¨‹

**æ­¥é©Ÿ 1ï¼šé–‹ç™¼äººå“¡å¾ release åˆ‡å‡º bugfix åˆ†æ”¯**

```bash
git checkout release/x.y.z
git pull origin release/x.y.z
git checkout -b bugfix/JIRA-789-fix-login-error
```

**âš ï¸ é‡è¦ï¼šç‚ºä»€éº¼å¿…é ˆå¾ release åˆ‡åˆ†æ”¯ï¼Œè€Œä¸æ˜¯å¾ feature åˆ†æ”¯ï¼Ÿ**

ç•¶åŠŸèƒ½å·²ç¶“æ¨é€²åˆ° SIT/UAT æ™‚ï¼Œèªªæ˜è©²åŠŸèƒ½å·²ç¶“é€šé PR åˆä½µåˆ° `release/*` åˆ†æ”¯äº†ã€‚æ­¤æ™‚å¿…é ˆå¾ `release/*` åˆ‡å‡º bugfix åˆ†æ”¯ï¼ŒåŸå› å¦‚ä¸‹ï¼š

1. **release æ˜¯æ•´åˆåˆ†æ”¯**ï¼š
   - `release/*` åŒ…å«äº†å¤šå€‹åŠŸèƒ½çš„æ•´åˆç‹€æ…‹
   - å¯èƒ½åŒ…å«å…¶ä»–åŠŸèƒ½çš„ä¿®æ”¹ã€ä¾è³´é—œä¿‚ã€è¡çªè§£æ±ºç­‰
   - å¾åŸå§‹çš„ `feature/*` ä¿®æ­£æœƒéºæ¼é€™äº›æ•´åˆå¾Œçš„è®Šæ›´

2. **ç¢ºä¿ä¿®æ­£åŸºæ–¼æœ€æ–°ç‹€æ…‹**ï¼š
   - `release/*` ä»£è¡¨ç•¶å‰è¦ä¸Šç·šçš„å®Œæ•´ç‰ˆæœ¬ç‹€æ…‹
   - å¾ `release/*` åˆ‡å‡ºå¯ä»¥ç¢ºä¿ä¿®æ­£åŸºæ–¼æ‰€æœ‰å·²åˆä½µåŠŸèƒ½çš„å®Œæ•´ç‹€æ…‹
   - é¿å…ä¿®æ­£å¾Œçš„ç¨‹å¼ç¢¼èˆ‡ release ä¸­å…¶ä»–åŠŸèƒ½ä¸ä¸€è‡´

3. **é¿å…éºæ¼ä¾è³´èˆ‡æ•´åˆè®Šæ›´**ï¼š
   - å…¶ä»–åŠŸèƒ½å¯èƒ½ä¿®æ”¹äº†å…±ç”¨çš„ç¨‹å¼ç¢¼ã€è¨­å®šæª”ã€ä¾è³´ç­‰
   - å¾ `feature/*` ä¿®æ­£å¯èƒ½éºæ¼é€™äº›è®Šæ›´ï¼Œå°è‡´ä¿®æ­£ä¸å®Œæ•´
   - å¾ `release/*` ä¿®æ­£å¯ä»¥ç¢ºä¿åŒ…å«æ‰€æœ‰æ•´åˆå¾Œçš„è®Šæ›´

4. **ç‰ˆæœ¬ä¸€è‡´æ€§**ï¼š
   - å¾ `release/*` åˆ‡å‡ºå¯ä»¥ç¢ºä¿ä¿®æ­£å¾Œçš„ç¨‹å¼ç¢¼èˆ‡ release çš„å…¶ä»–éƒ¨åˆ†ä¿æŒä¸€è‡´
   - ä¿®æ­£å¾Œåˆä½µå› `release/*` æ™‚ï¼Œä¸æœƒå¼•å…¥ä¸ä¸€è‡´çš„è®Šæ›´

5. **æ¸¬è©¦ç’°å¢ƒå°æ‡‰**ï¼š
   - SIT/UAT ç’°å¢ƒæ˜¯åŸºæ–¼ `release/*` éƒ¨ç½²çš„
   - å¾ `release/*` ä¿®æ­£å¯ä»¥ç¢ºä¿ä¿®æ­£å¾Œçš„ç¨‹å¼ç¢¼èˆ‡æ¸¬è©¦ç’°å¢ƒä¸€è‡´

**å¯©æ ¸æ™‚éœ€ç¢ºèª**ï¼š
- [ ] bugfix åˆ†æ”¯æ˜¯å¾ `release/*` åˆ‡å‡ºï¼Œä¸æ˜¯å¾ `feature/*`
- [ ] ä¿®æ­£åŸºæ–¼ç•¶å‰ release çš„å®Œæ•´ç‹€æ…‹
- [ ] ä¸æœƒéºæ¼å…¶ä»–åŠŸèƒ½çš„æ•´åˆè®Šæ›´

**æ­¥é©Ÿ 2ï¼šé–‹ç™¼äººå“¡ä¿®æ­£ä¸¦æäº¤ PR**

- PR ç›®çš„åœ°ï¼š`bugfix/* â†’ release/x.y.z`
- PR æè¿°æ‡‰åŒ…å«ï¼š
  - Bug æè¿°ï¼ˆåœ¨ SIT/UAT ç™¼ç¾çš„å•é¡Œï¼‰
  - ä¿®æ­£æ–¹å¼
  - æ¸¬è©¦æ–¹å¼
  - å½±éŸ¿ç¯„åœ

**æ­¥é©Ÿ 3ï¼šå¯©æ ¸ PR**

å¯©æ ¸é‡é»ï¼š
- [ ] ç¢ºèª bug ç¢ºå¯¦å­˜åœ¨ä¸”éœ€è¦ä¿®æ­£
- [ ] ç¢ºèªä¿®æ­£æ–¹å¼æ­£ç¢º
- [ ] ç¢ºèªä¸æœƒå½±éŸ¿å…¶ä»–åŠŸèƒ½
- [ ] ç¢ºèªæœ‰é©ç•¶çš„æ¸¬è©¦

**æ­¥é©Ÿ 4ï¼šåˆä½µå¾Œé‡æ–°æ¨é€²åˆ°ç’°å¢ƒ**

```bash
# åˆä½µ bugfix PR åˆ° release å¾Œ
# é‡æ–°æ¨é€²åˆ° sit
git checkout sit
git pull origin release/x.y.z
git push origin sit

# æˆ–æ¨é€²åˆ° uat
git checkout uat
git pull origin release/x.y.z
git push origin uat
```

#### ä¸åŒéšæ®µçš„è™•ç†ç­–ç•¥

**åœ¨ SIT éšæ®µç™¼ç¾ Bugï¼š**
1. å¾ `release/x.y.z` åˆ‡å‡º `bugfix/*`
2. ä¿®æ­£å¾Œåˆä½µåˆ° `release/x.y.z`
3. é‡æ–°æ¨é€²åˆ° `sit` é©—è­‰
4. é©—è­‰é€šéå¾Œï¼Œç¹¼çºŒæ¨é€²åˆ° `uat`

**åœ¨ UAT éšæ®µç™¼ç¾ Bugï¼š**
1. å¾ `release/x.y.z` åˆ‡å‡º `bugfix/*`
2. ä¿®æ­£å¾Œåˆä½µåˆ° `release/x.y.z`
3. **å»ºè­°å…ˆå› SIT é©—è­‰**ï¼ˆç¢ºä¿ä¿®æ­£æ­£ç¢ºï¼‰
4. é©—è­‰é€šéå¾Œï¼Œé‡æ–°æ¨é€²åˆ° `uat`

#### ç·Šæ€¥æƒ…æ³è™•ç†ï¼ˆä¸å»ºè­°ï¼Œéœ€å¯©æ…è©•ä¼°ï¼‰

**åƒ…åœ¨ä»¥ä¸‹æƒ…æ³è€ƒæ…®ï¼š**
- Bug éå¸¸ç·Šæ€¥ï¼Œå½±éŸ¿æ¸¬è©¦é€²åº¦
- ä¿®æ­£ç¯„åœå°ä¸”é¢¨éšªä½
- å·²ç²å¾—åœ˜éšŠè² è²¬äººåŒæ„

**è™•ç†æ–¹å¼ï¼š**
1. åœ¨ `sit` / `uat` ä¸Šç›´æ¥ä¿®æ­£ï¼ˆåƒ…é™ç·Šæ€¥æƒ…æ³ï¼‰
2. **ç«‹å³åŒæ­¥å› `release/*`**ï¼ˆå¿…é ˆï¼ï¼‰
3. äº‹å¾Œè£œä¸Šæ­£å¼çš„ bugfix PR
4. è¨˜éŒ„ç·Šæ€¥ä¿®æ­£çš„åŸå› 

**æ³¨æ„äº‹é …ï¼š**
- ç·Šæ€¥ä¿®æ­£å¿…é ˆç«‹å³åŒæ­¥å› releaseï¼Œé¿å…ç‰ˆæœ¬ä¸ä¸€è‡´
- äº‹å¾Œå¿…é ˆè£œä¸Šæ­£å¼çš„ PR å’Œå¯©æ ¸æµç¨‹
- æª¢è¨ç‚ºä»€éº¼éœ€è¦ç·Šæ€¥ä¿®æ­£ï¼Œé¿å…é‡è¤‡ç™¼ç”Ÿ

#### å¯©æ ¸é‡é»

- **ç¢ºèªä¿®æ­£ä¾†æºæ­£ç¢º**ï¼š
  - âœ… å¿…é ˆå¾ `release/*` åˆ‡å‡º bugfix åˆ†æ”¯
  - âŒ ç¦æ­¢å¾ `feature/*` åˆ‡å‡ºï¼ˆæœƒéºæ¼æ•´åˆè®Šæ›´ï¼‰
  - âŒ ç¦æ­¢å¾ `sit` / `uat` åˆ‡å‡ºï¼ˆç’°å¢ƒåˆ†æ”¯ä¸æ˜¯é–‹ç™¼åˆ†æ”¯ï¼‰
- **ç¢ºèªä¿®æ­£æœƒå›åˆ° release**ï¼šæ‰€æœ‰ä¿®æ­£éƒ½å¿…é ˆåˆä½µå› `release/*`
- **ç¢ºèªä¿®æ­£åŸºæ–¼å®Œæ•´ç‹€æ…‹**ï¼šä¿®æ­£æ‡‰åŸºæ–¼ release çš„æ•´åˆç‹€æ…‹ï¼ŒåŒ…å«æ‰€æœ‰å·²åˆä½µåŠŸèƒ½
- **ç¢ºèªé‡æ–°æ¨é€²æµç¨‹**ï¼šä¿®æ­£å¾Œéœ€è¦é‡æ–°æ¨é€²åˆ°ç’°å¢ƒé€²è¡Œé©—è­‰
- **ç¢ºèªæ¸¬è©¦è¦†è“‹**ï¼šä¿®æ­£å¾Œå¿…é ˆæœ‰é©ç•¶çš„æ¸¬è©¦é©—è­‰
- **ç¢ºèªå½±éŸ¿ç¯„åœ**ï¼šè©•ä¼°ä¿®æ­£æ˜¯å¦å½±éŸ¿å…¶ä»–åŠŸèƒ½

---

## 4. Hotfix æµç¨‹ç®¡ç†

### 4.1 Hotfix æµç¨‹

å¾ prodï¼ˆæˆ–ä¸Šç·š tagï¼‰åˆ‡å‡ºï¼š

```bash
git checkout prod
git pull origin prod
git checkout -b hotfix/issue-xxx
```

ä¿®æ­£å¾Œéœ€è¦å»ºç«‹å¤šå€‹ PRï¼š

- `hotfix/* â†’ prod`
- `hotfix/* â†’ main`
- `hotfix/* â†’ release/x.y.z`ï¼ˆè‹¥ç›®å‰æœ‰é€²è¡Œä¸­çš„ releaseï¼Œè¦–ç‹€æ³åŒæ­¥ï¼‰

### 4.2 Hotfix å¯©æ ¸é‡é»

- ç¢ºèªå•é¡Œçš„ç·Šæ€¥ç¨‹åº¦
- ç¢ºèªä¿®æ­£ç¯„åœæœ€å°åŒ–
- ç¢ºèªå·²åŒæ­¥åˆ° main å’Œç›¸é—œ release

---

## 5. ä¾è³´åˆ†æ”¯è™•ç†ç­–ç•¥

### 5.1 åŸå‰‡

- **ç¦æ­¢** feature åˆ†æ”¯ä¹‹é–“é•·æœŸäº’ç›¸å †ç–Š
- **ç¦æ­¢**ï¼šfeature/B å¾ feature/A åˆ‡å‡ºï¼ˆå®¹æ˜“å½¢æˆåˆ†æ”¯æ¨¹åœ°ç„ï¼‰
- ä¾è³´è¦ç”¨ã€Œrelease å…§æ•´åˆé †åºã€è§£æ±º
- æ‰€æœ‰ feature ä¸€å¾‹ä»å¾ main åˆ‡

### 5.2 ä¾è³´æƒ…å¢ƒï¼šB ä¾è³´ Aï¼ˆä¸åŒäººé–‹ç™¼ï¼‰

**æ¨™æº–åšæ³•**ï¼šå…ˆè®“ A é€² releaseï¼Œå†è®“ B é€² release

1. A å®Œæˆ â†’ PR åˆä½µ feature/A â†’ release/x.y.z
2. B ä»å¾ main åˆ‡ feature/B
3. B åœ¨éœ€è¦çœ‹åˆ° A çš„æ™‚å€™ï¼ŒæŠŠ release çš„å…§å®¹å¸¶åˆ° Bï¼ˆæ“‡ä¸€ï¼‰ï¼š
   - **åšæ³• 1ï¼ˆå»ºè­°ï¼‰**ï¼šåœ¨ B æœ¬åœ° merge/rebase release/x.y.z
   - **åšæ³• 2**ï¼šç­‰ A é€² release å¾Œï¼Œç›´æ¥å° release/x.y.z ç™¼ PRï¼Œè¡çªåœ¨ release è§£

**é‡é»**ï¼šä¾è³´çš„ã€ŒåŒ¯åˆé»ã€å›ºå®šåœ¨ releaseï¼Œä¸è¦æŠŠåˆ†æ”¯æ¨¹æ“´æ•£åˆ° feature å±¤

### 5.3 A å°šæœªå®Œæˆä½† B å¿…é ˆå…ˆåš

æ¡ç”¨ **Contract First / Stub**ï¼š

- A å…ˆæä¾› interface / DTO / empty implementationï¼ˆå¯å…ˆé€² releaseï¼‰
- B ä»¥å¥‘ç´„é–‹ç™¼ï¼Œç­‰ A çœŸæ­£é‚è¼¯å®Œæˆå¾Œå†æ•´åˆ
- é€™å¯ä»¥é¿å… B è¢« A å®Œå…¨å¡æ­»

---

## 6. å¸¸è¦‹å•é¡Œï¼ˆFAQï¼‰

### Q1ï¼šèƒ½ä¸èƒ½è®“æœªä¸Šç·šåŠŸèƒ½é€² mainï¼Ÿ

**å°å‹åœ˜éšŠï¼ˆ3-8 äººï¼‰ä¸å»ºè­°**ã€‚å°å‹åœ˜éšŠè³‡æºæœ‰é™ï¼Œmain å¿…é ˆä¿æŒç©©å®šå¯éƒ¨ç½²ç‹€æ…‹ã€‚æœªç¢ºå®šä¸Šç·šçš„åŠŸèƒ½é€² main æœƒå¢åŠ å›æ»¾é¢¨éšªï¼Œä¸”å®¹æ˜“é€ æˆç‰ˆæœ¬æ··äº‚ã€‚

**åœ˜éšŠè¦æ¨¡æ“´å¤§æ™‚ï¼ˆ>8 äººï¼‰çš„å»ºè­°**ï¼šç•¶åœ˜éšŠè¦æ¨¡æ“´å¤§ã€ä¸¦è¡Œé–‹ç™¼åŠŸèƒ½å¢å¤šæ™‚ï¼Œå»ºè­°å°å…¥ **Feature Toggle** æ©Ÿåˆ¶ã€‚å°å…¥å¾Œå¯èª¿æ•´ç­–ç•¥ï¼š
- å…è¨±æœªä¸Šç·šåŠŸèƒ½é€²å…¥ mainï¼ˆé€é toggle æ§åˆ¶é–‹é—œï¼‰
- feature/* å¯ç›´æ¥åˆä½µåˆ° mainï¼ˆä¸å†å¼·åˆ¶ç¶“é release/*ï¼‰
- é€é toggle åœ¨ç’°å¢ƒå±¤ç´šæ§åˆ¶åŠŸèƒ½é–‹é—œï¼Œè€Œéåˆ†æ”¯å±¤ç´š
- å¯é™ä½ release åˆ†æ”¯çš„æ•´åˆå£“åŠ›ï¼Œæå‡é–‹ç™¼ä¸¦è¡Œåº¦

å°å…¥ Feature Toggle éœ€è¦é¡å¤–æŠ•å…¥ï¼š
- Toggle ç®¡ç†ç³»çµ±ï¼ˆå¦‚ LaunchDarklyã€è‡ªå»ºæˆ–æ¡†æ¶å…§å»ºï¼‰
- åŠŸèƒ½é–‹é—œçš„æ¸¬è©¦ç­–ç•¥
- ä¸Šç·šå‰çš„ toggle æ¸…ç†æµç¨‹

### Q2ï¼šè¡çªæ˜¯ä¸æ˜¯éƒ½é›†ä¸­åœ¨ releaseï¼Ÿ

æœ‰å¯èƒ½ï¼Œå› æ­¤éœ€è¦ï¼š

- release æ—©åˆ‡
- feature æ¯æ—¥åŒæ­¥ main
- PR å°æ­¥æäº¤

### Q3ï¼šå¦‚æœæŸåŠŸèƒ½æœ€å¾Œä¸æƒ³ä¸Šç·šï¼Ÿ

ä¸è¦åˆä½µåˆ° release/*ã€‚è‹¥å·²åˆä½µé€² releaseï¼Œåªèƒ½ revertï¼ˆæ‰€ä»¥ freeze å‰è¦æ§å¥½ï¼‰ã€‚

### Q4ï¼šSIT éšæ®µéƒ¨åˆ†åŠŸèƒ½é©—è­‰å¤±æ•—ï¼Œå¦‚ä½•è™•ç†ï¼Ÿ

**æƒ…å¢ƒ**ï¼šrelease ä¸­åŒ…å«å¤šå€‹åŠŸèƒ½ï¼ŒSIT æ¸¬è©¦ä¸­æŸäº›åŠŸèƒ½é©—è­‰å¤±æ•—ï¼Œéœ€è¦å¾ release ä¸­ç§»é™¤ï¼Œä½†å…¶ä»–åŠŸèƒ½è¦ç¹¼çºŒæ¨é€²åˆ° UATã€‚

**è™•ç†æ–¹å¼è©³è¦‹ [3.3 SIT éšæ®µéƒ¨åˆ†åŠŸèƒ½é©—è­‰å¤±æ•—è™•ç†](#33-sit-éšæ®µéƒ¨åˆ†åŠŸèƒ½é©—è­‰å¤±æ•—è™•ç†)**

**é—œéµè¦é»ï¼š**
- ä½¿ç”¨ `git revert` ç§»é™¤å¤±æ•—åŠŸèƒ½çš„ commitï¼ˆæ¨è–¦ï¼‰
- æˆ–å»ºç«‹æ–°çš„ release åˆ†æ”¯ï¼ŒåªåŒ…å«é€šéçš„åŠŸèƒ½
- ç¢ºä¿å…¶ä»–åŠŸèƒ½ä¸å—å½±éŸ¿
- è¨˜éŒ„ç§»é™¤åŸå› ï¼Œé€šçŸ¥ç›¸é—œé–‹ç™¼äººå“¡
- å¤±æ•—çš„åŠŸèƒ½æ‡‰å›åˆ° feature åˆ†æ”¯ä¿®æ­£ï¼Œç­‰å¾…ä¸‹ä¸€å€‹ release

### Q5ï¼šSIT/UAT éšæ®µç™¼ç¾ Bugï¼Œå¦‚ä½•è™•ç†ï¼Ÿ

**æƒ…å¢ƒ**ï¼šåŠŸèƒ½å·²ç¶“æ¨é€²åˆ° `sit` æˆ– `uat` åˆ†æ”¯é€²è¡Œæ¸¬è©¦ï¼Œæ¸¬è©¦éç¨‹ä¸­ç™¼ç¾ bugï¼Œéœ€è¦ä¿®æ­£ã€‚

**è™•ç†æ–¹å¼è©³è¦‹ [3.6 SIT/UAT éšæ®µç™¼ç¾ Bug çš„ä¿®æ­£æµç¨‹](#36-situat-éšæ®µç™¼ç¾-bug-çš„ä¿®æ­£æµç¨‹)**

**é—œéµè¦é»ï¼š**
- âŒ **ç¦æ­¢**ç›´æ¥åœ¨ `sit` / `uat` åˆ†æ”¯ä¸Šé–‹ç™¼ä¿®æ­£
- âŒ **ç¦æ­¢**å¾ `feature/*` åˆ‡å‡º bugfix åˆ†æ”¯ï¼ˆæœƒéºæ¼æ•´åˆè®Šæ›´ï¼‰
- âœ… å¿…é ˆå¾ `release/*` åˆ‡å‡º `bugfix/*` åˆ†æ”¯é€²è¡Œä¿®æ­£
- âœ… ä¿®æ­£å¾Œåˆä½µå› `release/*`ï¼Œå†é‡æ–°æ¨é€²åˆ° `sit` / `uat`
- âœ… ç¢ºä¿æ‰€æœ‰ä¿®æ­£éƒ½å›åˆ° `release/*`ï¼Œä¿æŒç‰ˆæœ¬ä¸€è‡´æ€§
- âœ… UAT éšæ®µç™¼ç¾çš„ bugï¼Œå»ºè­°å…ˆå› SIT é©—è­‰

**ç‚ºä»€éº¼å¿…é ˆå¾ release åˆ‡åˆ†æ”¯ï¼Œè€Œä¸æ˜¯å¾ featureï¼Ÿ**

ç•¶åŠŸèƒ½å·²ç¶“æ¨é€²åˆ° SIT/UAT æ™‚ï¼Œè©²åŠŸèƒ½å·²ç¶“åˆä½µåˆ° `release/*` äº†ã€‚æ­¤æ™‚ `release/*` åŒ…å«äº†å¤šå€‹åŠŸèƒ½çš„æ•´åˆç‹€æ…‹ï¼ŒåŒ…æ‹¬å…¶ä»–åŠŸèƒ½çš„ä¿®æ”¹ã€è¡çªè§£æ±ºã€å…±ç”¨çš„è¨­å®šæª”ç­‰è®Šæ›´ã€‚å¦‚æœå¾åŸå§‹çš„ `feature/*` ä¿®æ­£ï¼Œæœƒéºæ¼é€™äº›æ•´åˆè®Šæ›´ï¼Œå°è‡´ä¿®æ­£ä¸å®Œæ•´æˆ–èˆ‡ release ä¸­å…¶ä»–åŠŸèƒ½ä¸ä¸€è‡´ã€‚å› æ­¤å¿…é ˆå¾ `release/*` åˆ‡å‡º bugfix åˆ†æ”¯ï¼Œç¢ºä¿ä¿®æ­£åŸºæ–¼å®Œæ•´çš„æ•´åˆç‹€æ…‹ã€‚

**å¯©æ ¸é‡é»ï¼š**
- ç¢ºèªä¿®æ­£ä¾†æºæ­£ç¢ºï¼š
  - âœ… å¾ `release/*` åˆ‡å‡ºï¼ˆæ­£ç¢ºï¼‰
  - âŒ ä¸æ˜¯å¾ `feature/*` åˆ‡å‡ºï¼ˆæœƒéºæ¼æ•´åˆè®Šæ›´ï¼‰
  - âŒ ä¸æ˜¯å¾ `sit` / `uat` åˆ‡å‡ºï¼ˆç’°å¢ƒåˆ†æ”¯ä¸æ˜¯é–‹ç™¼åˆ†æ”¯ï¼‰
- ç¢ºèªä¿®æ­£æœƒå›åˆ° `release/*`
- ç¢ºèªä¿®æ­£åŸºæ–¼ release çš„å®Œæ•´æ•´åˆç‹€æ…‹
- ç¢ºèªé‡æ–°æ¨é€²æµç¨‹æ­£ç¢º
- ç¢ºèªæ¸¬è©¦è¦†è“‹å……åˆ†

### Q6ï¼šSIT èƒ½ä¸èƒ½ç•¶é–‹ç™¼ä¸»ç·šï¼Ÿ

**ä¸å»ºè­°**ã€‚SIT æ˜¯ç’°å¢ƒåˆ†æ”¯ï¼Œæœƒè®“ä¸Šç·šå…§å®¹ä¸å¯æ§ã€‚

---

## 7. åœ˜éšŠè¦æ¨¡æ“´å¤§æ™‚çš„ç­–ç•¥æ¼”é€²

### 7.1 ä½•æ™‚è€ƒæ…®æ¼”é€²ï¼Ÿ

ç•¶å‡ºç¾ä»¥ä¸‹æƒ…æ³æ™‚ï¼Œå»ºè­°è©•ä¼°å°å…¥ Feature Toggleï¼š

- åœ˜éšŠè¦æ¨¡è¶…é 8 äºº
- ä¸¦è¡Œé–‹ç™¼çš„åŠŸèƒ½æ•¸é‡ > 5 å€‹
- release åˆ†æ”¯æ•´åˆè¡çªé »ç¹
- åŠŸèƒ½é–‹ç™¼é€±æœŸèˆ‡ release é€±æœŸç„¡æ³•å°é½Š

### 7.2 æ¼”é€²å¾Œçš„ç­–ç•¥èª¿æ•´

å°å…¥ Feature Toggle å¾Œï¼Œå¯èª¿æ•´ç‚ºï¼š

- **å…è¨± feature/* â†’ main**ï¼šæœªä¸Šç·šåŠŸèƒ½å¯é€² mainï¼Œé€é toggle æ§åˆ¶
- **ç°¡åŒ– release æµç¨‹**ï¼šrelease/* ä¸»è¦ç”¨æ–¼ç‰ˆæœ¬æ¨™è¨˜èˆ‡éƒ¨ç½²ï¼Œè€ŒéåŠŸèƒ½æ•´åˆ
- **ç’°å¢ƒå±¤ç´šæ§åˆ¶**ï¼šé€é toggle åœ¨ SIT/UAT/PROD ç’°å¢ƒåˆ†åˆ¥æ§åˆ¶åŠŸèƒ½é–‹é—œ
- **é™ä½åˆ†æ”¯ä¾è³´**ï¼šæ¸›å°‘å° release åˆ†æ”¯çš„ä¾è³´ï¼Œæå‡é–‹ç™¼ä¸¦è¡Œåº¦

### 7.3 å°å…¥æ³¨æ„äº‹é …

- éœ€è¦å»ºç«‹ toggle ç®¡ç†æ©Ÿåˆ¶èˆ‡è¦ç¯„
- éœ€è¦å®šæœŸæ¸…ç†å·²ä¸Šç·šåŠŸèƒ½çš„ toggleï¼ˆé¿å…æŠ€è¡“å‚µï¼‰
- éœ€è¦åŠ å¼·æ¸¬è©¦ç­–ç•¥ï¼ˆç¢ºä¿ toggle é–‹é—œç‹€æ…‹çš„æ­£ç¢ºæ€§ï¼‰

---

## 8. å»ºè­°é™„éŒ„

### 8.1 PR Template

å»ºè­°åœ¨ Bitbucket ä¸­è¨­å®š PR Templateï¼ŒåŒ…å«ä»¥ä¸‹æ¬„ä½ï¼š

```markdown
## Summary
<!-- é€™å€‹ PR åšä»€éº¼ -->

## Scope/Impact
<!-- å½±éŸ¿ç¯„åœï¼ˆAPI/DB/UI/æ’ç¨‹â€¦ï¼‰ -->

## Test Evidence
<!-- æ€éº¼æ¸¬ã€æ¸¬äº†ä»€éº¼ï¼ˆå« SIT é©—è­‰æ–¹å¼ï¼‰ -->

## Risk
<!-- å›æ»¾é¢¨éšªã€ç›¸ä¾é …ç›® -->
```

### 8.2 Release Checklist

**Release Freeze å‰ï¼š**
- [ ] ç¢ºèªæ‰€æœ‰è¦ä¸Šç·šçš„åŠŸèƒ½å·²åˆä½µåˆ° release
- [ ] ç¢ºèªæ‰€æœ‰ PR å·²é€šéå¯©æ ¸
- [ ] ç¢ºèª CI å…¨éƒ¨é€šé

**UAT å‰ï¼š**
- [ ] Release freeze
- [ ] åƒ…å…è¨± bug fix

**PROD ä¸Šç·šå‰ï¼š**
- [ ] UAT æ¸¬è©¦é€šé
- [ ] ç¢ºèª release note å®Œæ•´
- [ ] ç¢ºèªç‰ˆæœ¬è™Ÿæ­£ç¢º

**PROD ä¸Šç·šå¾Œï¼š**
- [ ] åˆä½µ release â†’ main
- [ ] å»ºç«‹ release tag
- [ ] é€šçŸ¥ç›¸é—œäººå“¡

### 8.3 Branch Protection è¦å‰‡

è©³è¦‹ [2. åˆ†æ”¯ä¿è­·è¦å‰‡ï¼ˆBitbucket è¨­å®šï¼‰](#2-åˆ†æ”¯ä¿è­·è¦å‰‡bitbucket-è¨­å®š)

### 8.4 Commit Message è¦ç¯„

å»ºè­°æ ¼å¼ï¼š

```
<type>(<scope>): <subject>

<body>

<footer>
```

**Typeï¼š**
- `feat`: æ–°åŠŸèƒ½
- `fix`: ä¿®å¾© bug
- `docs`: æ–‡ä»¶è®Šæ›´
- `style`: ç¨‹å¼ç¢¼æ ¼å¼ï¼ˆä¸å½±éŸ¿åŠŸèƒ½ï¼‰
- `refactor`: é‡æ§‹
- `test`: æ¸¬è©¦ç›¸é—œ
- `chore`: å»ºç½®æµç¨‹æˆ–è¼”åŠ©å·¥å…·çš„è®Šå‹•

**ç¯„ä¾‹ï¼š**
```
feat(api): æ–°å¢ä½¿ç”¨è€…ç™»å…¥ API

- å¯¦ä½œ JWT token é©—è­‰
- æ–°å¢ç™»å…¥ endpoint
- æ–°å¢ç›¸é—œæ¸¬è©¦

Closes #123
```
